.libPaths()
knitr::opts_chunk$set(echo = TRUE)
install.packages('MASS')
install.packages('lmtest')
install.packages('stargazer')
install.packages('dplyr')
install.packages('readstata13')
library(readstata13)
knitr::opts_chunk$set(echo = TRUE)
install.packages('MASS', dependencies=TRUE)
install.packages('lmtest', dependencies=TRUE)
install.packages('stargazer', dependencies=TRUE)
install.packages('dplyr', dependencies = TRUE)
install.packages('readstata13', dependencies = TRUE)
library(readstata13)
libPath
libPath()
.libPaths()
knitr::opts_chunk$set(echo = TRUE)
install.packages("MASS", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("stargazer", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("lmtest", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("dplyr", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("readstata13", lib="/Users/mariomoreno/anaconda3/lib/R/library")
library(readstata13)
find.package('readstata13')
find.package('dplyr')
find.package('stargazer')
find.package('MASS')
find.package('lmtest')
knitr::opts_chunk$set(echo = TRUE)
install.packages("MASS", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("stargazer", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("lmtest", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("dplyr", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("readstata13", lib="/Users/mariomoreno/anaconda3/lib/R/library")
library(readstata13)
install.packages("MASS")
install.packages("stargazer", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("lmtest", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("dplyr", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("readstata13", lib="/Users/mariomoreno/anaconda3/lib/R/library")
library(readstata13)
install.packages("MASS", dependencies = TRUE)
install.packages("stargazer", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("lmtest", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("dplyr", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("readstata13", lib="/Users/mariomoreno/anaconda3/lib/R/library")
library(readstata13)
knitr::opts_chunk$set(echo = TRUE)
install.packages("MASS", dependencies = TRUE)
install.packages("stargazer", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("lmtest", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("dplyr", lib="/Users/mariomoreno/anaconda3/lib/R/library")
install.packages("readstata13", lib="/Users/mariomoreno/anaconda3/lib/R/library")
library(readstata13)
install.packages('knitr')
knitr::opts_chunk$set(echo = TRUE)
install.packages("knitr")
install.packages("MASS")
install.packages("stargazer")
install.packages("lmtest")
install.packages("readstata13")
library(readstata13)
library(lmtest)
library(stargazer)
setwd("/Users/mariomoreno/Desktop/Grad School/ProgramEval/PS3")
dset <- read.dta13('ASQJE.dta')
View(dset)
preset <- subset(dset, pre==1)
View(preset)
interaction <- crime + ged + empgap
interaction <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + interaction, data = preset)
stargazer(regr.pre, type='text', title="Pre-period regression")
preset <- subset(dset, pre==1 & remover!=-1)
covars <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
stargazer(regr.pre, type='text', title="Pre-period regression")
boxset <- subset(dset, crimbox==1 & remover!=-1)
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
stargazer(regr.box, type='text', title="Box regression")
install.packages('knitr')
knitr::opts_chunk$set(echo = TRUE)
install.packages("MASS")
install.packages("knitr")
install.packages("stargazer")
install.packages("lmtest")
install.packages("readstata13")
library(readstata13)
library(lmtest)
library(stargazer)
setwd("/Users/mariomoreno/Desktop/Grad School/ProgramEval/PS3")
dset <- read.dta13('ASQJE.dta')
newset <- subset(dset, crimbox==1 & pre==1 & remover!= -1)
crime <- subset(newset, crime==1)
nocrime <- subset(newset, crime==0)
t.test(crime$response, nocrime$response)
q2set <- subset(dset, remover==1)
FEReg_white <- lm(response ~ white + ged + empgap + factor(cogroup_comb) + factor(center), data = q2set)
FEReg_black <- lm(response ~ black + ged + empgap + factor(cogroup_comb) + factor(center), data = q2set)
stargazer(FEReg_white, FEReg_black, type='text', title='Callback Rates on Race')
reg.white <- lm(response ~ white + ged + empgap, data = q2set)
reg.black <- lm(response ~ black + ged + empgap, data = q2set)
stargazer(reg.white, reg.black, type='text', title='Callback Rates on Race w/o FE')
reg.whiteomv <- lm(response ~ white + ged + empgap + crime, data = q2set)
stargazer(reg.whiteomv, type='text', title='Callback Rates on Race w/Conviction')
preset <- subset(dset, pre==1 & remover!=-1)
covars <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
stargazer(regr.pre, type='text', title="Pre-period regression")
boxset <- subset(dset, crimbox==1 & remover!=-1)
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
stargazer(regr.box, type='text', title="Box regression")
covars <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
stargazer(regr.pre, type='text', title="Pre-period regression")
summary(regr.pre, cluster=c("chain_id"))
covars <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
summary(regr.pre, cluster=c("chain_id"))
covars <- preset$crime + preset$ged + preset$empgap + preset$chain_id
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
summary(regr.pre, cluster=c("chain_id"))
covars <- preset$crime + preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + covars, data = preset)
summary(regr.pre, cluster=c("chain_id"))
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
boxset <- subset(dset, remover==1)
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box) #, cluster=c("chain_id"))
covars1 <- boxset$crime + boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
covars1 <- boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
covars1 <- boxset$ged + boxset$empgap + boxset$crime
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
install.packages('knitr')
knitr::opts_chunk$set(echo = TRUE)
covars <- preset$ged + preset$empgap
regr.pre <- lm(response ~ crimbox + white + (crimbox * white) + factor(center), data = preset)
summary(regr.pre, cluster=c("chain_id"))
install.packages("knitr")
covars1 <- boxset$ged + boxset$empgap
regr.box <- lm(response ~ crimbox + white + (crimbox * white) + factor(center) + covars1, data = boxset)
summary(regr.box, cluster=c("chain_id"))
regr.pre <- lm(response ~ crimbox + white + ged + empgap + (crimbox * white) + factor(center), data = preset)
summary(regr.pre, cluster=c("chain_id"))
regr.box <- lm(response ~ crimbox + white + ged + empgap (crimbox * white) + factor(center), data = boxset)
regr.box <- lm(response ~ crimbox + white + ged + empgap + (crimbox * white) + factor(center), data = boxset)
summary(regr.box, cluster=c("chain_id"))
knitr::opts_chunk$set(echo = TRUE)
install.packages("rmarkdown")
install.packages("MASS")
install.packages("rmarkdown")
install.packages("stargazer")
install.packages("lmtest")
install.packages("readstata13")
library(readstata13)
library(lmtest)
library(stargazer)
setwd("/Users/mariomoreno/Desktop/Grad School/ProgramEval/PS3")
dset <- read.dta13('ASQJE.dta')
getwd
getwd()
setwd('Macintosh HD⁩ ▸ ⁨Users⁩ ▸ ⁨mariomoreno⁩ ▸ ⁨Desktop⁩ ▸ ⁨Grad School⁩ ▸ ⁨Data Viz⁩ ▸ ⁨Data⁩ ▸ ⁨Guatemala⁩')
setwd('Users/mariomoreno/Desktop/Grad School/Data Viz/Data/Guatemala')
getwd()
setwd("Users/mariomoreno/Desktop/Grad School/Data Viz/Data/Guatemala")
setwd("Users/mariomoreno/Desktop/Grad School")
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
install.packages('sf')
install.packages('tigris')
install.packages('gghighlight')
library(sf)
library(ggplot2)
library(dplyr)
library(tidyverse)
library(tigris)
library(gtools)
library(ggrepel)
library(gghighlight)
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
setwd("~/Desktop/Grad School/Data Viz/Migration Project")
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
# Read in Deported from Mexico data
path <- "Data/"
files <- list.files(path=path, pattern="*mex.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)),
read.csv(paste(path,file,sep="")))
}
View(honddev2017mex)
source('~/Desktop/Grad School/Data Viz/Migration Project/Graph Types Code/MexicoMap.R', echo=TRUE)
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
# Read in Deported from Mexico data
path <- "Data/"
files <- list.files(path=path, pattern="*2016mex.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)),
read.csv(paste(path,file,sep="")))
}
View(elsdev2016mex)
View(guatedev2016mex)
View(mex_shape)
hond <- honddev2016mex[c('pais, p34m')]
View(elsdev2016mex)
elsdev2016mex$pais <- 'El Salvador'
honddev2016mex$pais <- 'Honduras'
guatedev2016mex <- 'Guatemala'
hond <- honddev2016mex[c('pais, p34m')]
hond <- honddev2016mex[c('pais', 'p34m')]
guate <- guatedev2016mex[c('pais', 'p34m')]
els <- elsdev2016mex[c('pais', 'p34m')]
guate <- guatedev2016mex[c('pais', 'p34m')]
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
# Read in Deported from Mexico data
path <- "Data/"
files <- list.files(path=path, pattern="*2016mex.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)),
read.csv(paste(path,file,sep="")))
}
elsdev2016mex$pais <- 'El Salvador'
honddev2016mex$pais <- 'Honduras'
guatedev2016mex$pais <- 'Guatemala'
hond <- honddev2016mex[c('pais', 'p34m')]
guate <- guatedev2016mex[c('pais', 'p34m')]
els <- elsdev2016mex[c('pais', 'p34m')]
View(els)
# Pull out values for every municipality in the responses
hond_vals <- read.csv('Values/Honduras_Valores.csv')
View(hond_vals)
# Pull out values for every municipality in the responses
hond_vals <- read.csv('Values/Honduras_Valores.csv')
View(hond_vals)
guate_vals <- read.csv('Values/Guate_Valores.csv')
els_vals <- read.csv('Values/Els_Valores.csv')
View(els_vals)
els_vals <- read.csv('Values/Els_Valores.csv')
View(hond_vals)
hond_vals <- subset(hond_vals$Variable == 'p34m')
hond_vals <- subset(hond_vals, Variable == 'p34m')
View(hond_vals)
guate_vals <- subset(guate_vals, Variable == 'p34m')
els_vals <- subset(els_vals, Variable == 'p34m')
# Read Mexico Shapefile
mex_shape <- st_read('Data/Mex_adm/Mex_adm2.shp')
# Read in Deported from Mexico data
path <- "Data/"
files <- list.files(path=path, pattern="*2016mex.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)),
read.csv(paste(path,file,sep="")))
}
elsdev2016mex$pais <- 'El Salvador'
honddev2016mex$pais <- 'Honduras'
guatedev2016mex$pais <- 'Guatemala'
honddev2016mex <- honddev2016mex[c('pais', 'p34m')]
guatedev2016mex <- guatedev2016mex[c('pais', 'p34m')]
elsdev2016mex <- elsdev2016mex[c('pais', 'p34m')]
# Pull out values for every municipality in the responses
hond_vals <- read.csv('Values/Honduras_Valores.csv')
guate_vals <- read.csv('Values/Guate_Valores.csv')
els_vals <- read.csv('Values/Els_Valores.csv')
hond_vals <- subset(hond_vals, Variable == 'p34m')
guate_vals <- subset(guate_vals, Variable == 'p34m')
els_vals <- subset(els_vals, Variable == 'p34m')
View(honddev2016mex)
View(honddev2016mex)
if (hond_vals$Valor == honddev2016mex$p34m) {
honddev2016mex$city == hond_vals$Descripción
}
View(honddev2016mex)
anti_join(hond_vals, honddev2016mex)
View(honddev2016mex)
honddev2016mex$p34m[honddev2016mex$p34m %in% hond_vals$Valor] <- hond_vals$Descripción
View(guatedev2016mex)
View(honddev2016mex)
honddev2016mex[1,]$pais
for (row in 1:length(honddev2016mex$p34m)) {
for (row1 in 1:length(hond_vals$Variable)) {
if (honddev2016mex[row,]$p34m == hond_vals[row1,]$Valor) {
honddev2016mex[row,]$p34m == hond_vals[row1,]$Descripción
}
}
}
View(honddev2016mex)
View(honddev2016mex)
View(hond_vals)
View(honddev2016mex)
View(elsdev2016mex)
View(elsdev2016mex)
View(hond_vals)
chooseCRANmirror(graphics=FALSE, ind=1)
knitr::opts_chunk$set(echo = TRUE)
install.packages('rmarkdown')
install.packages('knitr')
install.packages('ggplot2')
install.packages('tidyverse')
install.packages('gghighlight')
install.packages('ggalluvial')
install.packages("rmarkdown")
install.packages("knitr")
install.packages("ggplot2")
install.packages("tidyverse")
install.packages("gghighlight")
library(ggalluvial)
library(ggplot2)
library(ggrepel)
library(gghighlight)
library(gtools)
library(tidyverse)
library(dplyr)
install.packages("ggplot2")
install.packages("tidyverse")
install.packages("gghighlight")
install.packages("tidyverse")
install.packages("gghighlight")
install.packages("gghighlight")
# READING IN FOR BAR, LINE, AND BUBBLE GRAPHS
elsLAPOP <- read.csv('Data/elsLAPOP.csv', encoding='latin1', stringsAsFactors = FALSE)
guateLAPOP <- read.csv('Data/guateLAPOP.csv', encoding='latin1', stringsAsFactors = FALSE)
hondLAPOP <- read.csv('Data/hondLAPOP.csv', encoding = 'latin1', stringsAsFactors = FALSE)
sec <- read.csv('Data/security.csv')
elsLAPOP$pais[elsLAPOP$pais==3] <- "El Salvador"
guateLAPOP$pais[guateLAPOP$pais==2] <- "Guatemala"
hondLAPOP$pais[hondLAPOP$pais==4] <- "Honduras"
cols_to_keep <- intersect(colnames(elsLAPOP), colnames(guateLAPOP))
g <- guateLAPOP[, cols_to_keep, drop=FALSE]
e <- elsLAPOP[, cols_to_keep, drop=FALSE]
bind <- smartbind(g, e)
cols_to_keep <- intersect(colnames(bind), colnames(hondLAPOP))
h <- hondLAPOP[, cols_to_keep, drop=FALSE]
b <- bind[, cols_to_keep, drop=FALSE]
LAPOP <- smartbind(h, b)
rm(cols_to_keep, g, e, h, b, bind)
## READING FOR ALLUVIAL GRAPH
hmex <- read.csv('Data/honddev2017mex.csv')
hmex$pais <- 'Honduras'
hmex$deported <- 'Mexico'
husa <- read.csv('Data/honddev2017usa.csv')
husa$pais <- 'Honduras'
husa$deported <- 'USA'
cols_to_keep_mex <- c('pais', 'deported', 'p15', 'p22_1e', 'p22_1l', 'p22_2e', 'p22_2l', 'p24l', 'p34l')
cols_to_keep_usa <- c('pais', 'deported', 'p14_1', 'p19_1e', 'p19_1l', 'p19_2e', 'p19_2l', 'p20l', 'p26')
husa1 <- husa[cols_to_keep_usa]
hmex1 <- hmex[cols_to_keep_mex]
colnames(husa1)[colnames(husa1)=="p14_1"] <- "p15"
colnames(husa1)[colnames(husa1)=="p19_1e"] <- "p22_1e"
colnames(husa1)[colnames(husa1)=="p19_1l"] <- "p22_1l"
colnames(husa1)[colnames(husa1)=="p19_2e"] <- "p22_2e"
colnames(husa1)[colnames(husa1)=="p19_2l"] <- "p22_2l"
colnames(husa1)[colnames(husa1)=="p20l"] <- "p24l"
alluvial <- dplyr::bind_rows(husa1, hmex1)
alluvial[is.na(alluvial)] <- 0
rm(hmex, husa, hmex1, husa1, cols_to_keep_usa, cols_to_keep_mex)
## READING IN FOR SLOPE GRAPH
path <- "Data/"
files <- list.files(path=path, pattern="*usa.csv")
for(file in files)
{
perpos <- which(strsplit(file, "")[[1]]==".")
assign(
gsub(" ","",substr(file, 1, perpos-1)),
read.csv(paste(path,file,sep="")))
}
# Add country identifiers
elsdev2014usa$pais <- 'Price paid by El Salvadorean migrants'
elsdev2015usa$pais <- 'Price paid by El Salvadorean migrants'
elsdev2016usa$pais <- 'Price paid by El Salvadorean migrants'
elsdev2017usa$pais <- 'Price paid by El Salvadorean migrants'
honddev2014usa$pais <- 'Price paid by Honduran migrants'
honddev2015usa$pais <- 'Price paid by Honduran migrants'
honddev2016usa$pais <- 'Price paid by Honduran migrants'
honddev2017usa$pais <- 'Price paid by Honduran migrants'
guatedev2014usa$pais <- 'Price paid by Guatemalan migrants'
guatedev2015usa$pais <- 'Price paid by Guatemalan migrants'
guatedev2016usa$pais <- 'Price paid by Guatemalan migrants'
guatedev2017usa$pais <- 'Price paid by Guatemalan migrants'
# subset dataframes
e2014 <- elsdev2014usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
e2015 <- elsdev2015usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
e2016 <- elsdev2016usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
e2017 <- elsdev2017usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
h2014 <- honddev2014usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
h2015 <- honddev2015usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
h2016 <- honddev2016usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
h2017 <- honddev2017usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
g2014 <- guatedev2014usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
g2015 <- guatedev2015usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
g2016 <- guatedev2016usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
g2017 <- guatedev2017usa[c('year', 'pais', 'p17_1c', 'p17_1u')]
rm(elsdev2014usa, elsdev2015usa, elsdev2016usa, elsdev2017usa, honddev2014usa, honddev2015usa, honddev2016usa, honddev2017usa, guatedev2014usa, guatedev2015usa, guatedev2016usa, guatedev2017usa)
# bind them
slopegraph <- do.call("rbind", list(e2014, e2015, e2016, e2017, h2014, h2015, h2016, h2017, g2014, g2015, g2016, g2017))
rm(e2014, e2015, e2016, e2017, h2014, h2015, h2016, h2017, g2014, g2015, g2016, g2017)
# READ IN NIGHTINGALE
hmex <- read.csv('Data/honddev2017mex.csv')
hmex$pais <- 'Honduras'
hmex$deported <- 'Mexico'
husa <- read.csv('Data/honddev2017usa.csv')
husa$pais <- 'Honduras'
husa$deported <- 'USA'
gmex <- read.csv('Data/guatedev2017mex.csv')
gmex$pais <- 'Guatemala'
gmex$deported <- 'Mexico'
gusa <- read.csv('Data/guatedev2017usa.csv')
gusa$pais <- 'Guatemala'
gusa$deported <- 'USA'
emex <- read.csv('Data/elsdev2017mex.csv')
emex$pais <- 'El Salvador'
emex$deported <- 'Mexico'
eusa <- read.csv('Data/elsdev2017usa.csv')
eusa$pais <- 'El Salvador'
eusa$deported <- 'USA'
usa1 <- smartbind(eusa, gusa)
usa <- smartbind(usa1, husa)
rm(usa1)
mex1 <- smartbind(emex, gmex)
mex <- smartbind(mex1, hmex)
rm(mex1)
rm(husa, hmex, gmex, gusa, emex, eusa, usa1, mex1)
mario_theme <- theme(text = element_text(family='Georgia'),
plot.title = element_text(size = 20, margin = margin(b = 10)),
plot.subtitle = element_text(size = 10, color = "darkslategrey", margin = margin(b = 25)),
axis.title.x = element_text(color='darkslategrey', size=8),
axis.title.y = element_text(color='darkslategrey', size=8),
plot.caption = element_text(size = 8, margin = margin(t = 10), color = "grey70", hjust = 0),
legend.title = element_text(face='bold', size=8),
legend.position = 'bottom', legend.direction = 'horizontal', legend.box = 'horizontal',
legend.key.size = unit(0.5, 'cm'))
mario_scale_cont <- scale_fill_gradient(low='#feebe2', high='#7a0177')
mario_manual <- scale_color_manual(values=c('#DDA0DD','#FF00FF', '#4B0082'))
# Calulcate the percent of people who've considered emigration over time
inter <- LAPOP %>%
select(year, pais, q14) %>%
group_by(year, pais) %>%
add_tally() %>%
add_count(q14)
inter$perc <- (inter$nn / inter$n) * 100
to_graph <- inter %>%
select(year, pais, perc, q14) %>%
group_by(year, pais) %>%
arrange(q14) %>%
slice(1)
# Plot
plot <- ggplot(to_graph, aes(x=as.factor(year), y=pais, fill=perc)) + geom_tile(aes(fill=perc)) + geom_text(aes(label=round(perc, 1), fontface='bold')) + mario_scale_cont
labels <- labs(title = 'Since 2012, the percentage of Honduran residents \n planning to emigrate has increased nearly 30%',
subtitle = 'Across the region, there are notable increases in plans to emigrate since 2012',
caption = 'Source: LAPOP 2010-2016',
x = 'Year',
y = 'Country',
fill = '% planning to emigrate')
update_theme <- theme(axis.title.x = element_blank(),
axis.title.y = element_blank(),
panel.grid = element_blank(),
axis.ticks = element_blank(),
panel.background = element_blank())
plot + labels + mario_theme + update_theme
rm(inter, to_graph, plot)
subemigrate <- LAPOP %>%
select(year, pais, prov, q14) %>%
filter(year != 2012, year != 2014, year != 2010, prov != 414, prov != 415, prov != 416, prov != 417, prov != 219) %>%
na.omit() %>%
group_by(year, pais, prov) %>%
add_tally() %>%
add_count(q14) %>%
distinct(year, pais, prov, q14, n, nn)
subemigrate$perc <- (subemigrate$nn / subemigrate$n) * 100
emigrate <- subemigrate %>%
select(year, pais, prov, perc, q14) %>%
group_by(year, pais, prov) %>%
arrange(q14) %>%
slice(1)  %>%
select(year, pais, prov, perc) %>%
group_by(year, pais, prov) %>%
arrange(desc(perc))
emigrate$prov[emigrate$prov=='AtlÃ¡ntida'] <- "Atlántida"
emigrate$prov[emigrate$prov=='ColÃ³n'] <- "Colón"
emigrate$prov[emigrate$prov=='CopÃ¡n'] <- "Copán"
emigrate$prov[emigrate$prov=='CortÃ©s'] <- "Cortés"
emigrate$prov[99] <- "El Paraíso"
View(emigrate)
